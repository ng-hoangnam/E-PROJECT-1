<?php include('./php-control/cart.php'); ?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <?php include('./templates/main-head.html'); ?>

</head>

<body>
    <?php include('./templates/header.html'); ?>

    <!-- main content -->
    <?php if(!isset($_SESSION['cart'])):?>
    <div id="cart">
        <div class="d-flex flex-column align-items-center my-5">
            <b>(0)</b>
            <i>You haven't added any product yet</i>
            <p>Figure out more from <a class="btn-link" href="./product.html">Our Product</a></p>
        </div>
    </div>
    <?php else:?>
    <div id="cart">
        <div class="d-flex flex-column align-items-center my-5">
            <div class="section-title">
                <h2>Shopping Cart</h2>
                <p>“You deserve the best”</p>
            </div>
            <div class="container">
                <table>
                    <thead>
                        <tr>
                            <th>Img</th>
                            <th>Product Name</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Update</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php for($i = 0 ; $i < count($_SESSION['cart']) ; $i++ ): ?>
                        <tr>
                            <td><img src="./assets/img/lightType/<?php echo $_SESSION['cart'][$i][3] ?>" alt=""></td>
                            <td>
                                <i><?php echo $_SESSION['cart'][$i][4]; ?></i>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-dark rounded-0 mx-2" style="padding: 0 4px;"><i class="bi bi-plus"></i></button>
                                <?php echo $_SESSION['cart'][$i][1] ?>
                                <button type="button" class="btn btn-outline-dark rounded-0 mx-2" style="padding: 0 4px;"><i class="bi bi-dash"></i></button>
                            </td>
                            <td>
                                <?php echo $_SESSION['cart'][$i][2] ?>
                            </td>
                            <td>
                                <form method="post">
                                    <input type="hidden" name="id" value="<?php echo $_SESSION['cart'][$i][0]; ?>">
                                    <button type="submit" class="btn btn-outline-dark rounded-0" name="delete">DELETE</button>
                                </form>
                            </td>
                        </tr>
                        <?php endfor ?>
                    </tbody>
                </table>
                <form>
                    <div class="container">
                        <div class="d-flex justify-content-center align-items-center">
                            <h4>Cart total :</h4>
                            <span class="mx-2">
                                <?php
                                    $total = 0 ; 
                                    if(isset($_SESSION['cart'])){
                                        for($i = 0 ; $i < count($_SESSION['cart']) ; $i++){
                                            $total = $total + ($_SESSION['cart'][$i][2] * $_SESSION['cart'][$i][1]);
                                        }
                                    }
                                    echo '$ ' . $total ;
                                ?>
                            </span>
                        </div>
                        <div class="d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark rounded-0">Place Order</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <?php endif;?>
    <?php include('./templates/footer.html'); ?>

    <?php include('./templates/link-script.html'); ?>
</body>

</html>